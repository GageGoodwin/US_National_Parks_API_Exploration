<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
    <title>National Park Service Live Stream URLs</title>
</head>
<body>
    <h1>National Park Service Live Stream URLs</h1>
    <div id="webcam-list"></div>

    <script>
        const apiKey = '';
        let start = 0;
        const limit = 50; // Adjust the limit as needed
        let total = 0;
        let webcams = []; // Array to hold all webcam data
      
        async function fetchWebcams() {
            try {
                do {
                    const apiUrl = `https://developer.nps.gov/api/v1/webcams?start=${start}&api_key=${apiKey}`;
                    const response = await fetch(apiUrl);
                    const data = await response.json();
      
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
      
                    if (data && data.data && data.data.length > 0) {
                        total = parseInt(data.total, 10);
      
                        // Add fetched webcams to the array
                        webcams = webcams.concat(data.data);
      
                        start += data.data.length;
                    } else {
                        if (start === 0) {
                            document.getElementById('webcam-list').textContent = 'No webcams available.';
                        }
                        break;
                    }
                } while (start < total);
      
                // Sorting webcams by title in alphabetical order
                webcams.sort((a, b) => a.title.localeCompare(b.title));
      
                // Append sorted webcams to the DOM
                appendWebcams();
      
            } catch (error) {
                console.error('Error fetching data:', error);
                document.getElementById('webcam-list').textContent = 'Error fetching data.';
            }
        }
      
        function appendWebcams() {
            const webcamList = document.getElementById('webcam-list');
            webcams.forEach((webcam, index) => {
                const title = webcam.title;
                const imageUrl = webcam.url;
      
                const urlElement = document.createElement('a');
                urlElement.textContent = `${index + 1}. ${title}`; // Adding numbering here
                urlElement.href = imageUrl;
                urlElement.target = '_blank';
                urlElement.style.display = 'block';
                urlElement.style.marginBottom = '10px';
      
                webcamList.appendChild(urlElement);
            });
        }
      
        window.onload = fetchWebcams;
      </script>
</body>
</html>
